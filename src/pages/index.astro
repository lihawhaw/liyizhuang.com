---
import Link from '../components/base/Link.astro'
import { siteTitle, beianGN, beianICP } from '../config'
import Base from '../layouts/Base.astro'

const siteList = [
  {
    text: '关于本站',
    link: '/article/redesign-my-website',
  },
  {
    text: '上传图片',
    link: '/tool/images/upload',
  },
  {
    text: '关于我',
    link: 'https://lihaha.cn/about',
  },
  {
    text: '文章列表',
    link: '/article/redesign-my-website',
  },
  {
    text: '作品',
    link: '/work',
  },
]
---

<Base>
  <img
    class='blur-0.5 fixed top-0 left-0 z-[-1] h-[110%] object-cover'
    width='100%'
    src='https://static.lihaha.cn/images/30d60b48-a4f4-4721-a044-e0f192d89015.png'
    alt='background'
  />

  <main class='h-full bg-black/25'>
    <section
      class='container flex h-full max-w-6xl -translate-y-14 items-center justify-around gap-6 p-3 md:-translate-y-10'
    >
      <main class='flex-1 transition-all duration-1000'>
        <div class='flex items-center'>
          <img
            class='w-20 rounded-full transition-all duration-1000 sm:w-24'
            src='https://static.lihaha.cn/avatar/blogger.svg'
            alt='avatar'
          />
          <div class='ml-4 translate-y-2 transition-all duration-1000'>
            <div class='font-[Yunmobei-enlogo-Regular] text-2xl font-bold tracking-wider transition-all duration-1000 sm:text-4xl'>
              Hello, I'm
            </div>
            <h1 class='font-(family-name:--font-yer) text-5xl font-bold tracking-wider transition-all duration-1000 sm:text-6xl'>
              Li Yizhuang
            </h1>
          </div>
        </div>

        <div
          class='mt-14 flex cursor-pointer rounded-md bg-black/25 p-4 backdrop-blur-md transition-all duration-1000 lg:max-w-md'
        >
          <i class='self-start text-2xl leading-none'>“</i>
          <div class='flex-1 px-3'>
            <span class='block text-left'>最顶级的人才喜欢一起工作，而且他们是不能容忍平庸作品的。</span>
            <span class='mt-3 block text-right'>—— 史蒂夫 · 乔布斯&emsp;</span>
          </div>
          <i class='h-3 self-end text-2xl leading-none'>”</i>
        </div>

        <div class='mt-8 mb-4 text-xl md:hidden'>网站列表</div>
        <div class='grid grid-cols-3 gap-4 md:hidden'>
          {
            siteList.map(item => {
              return (
                <a
                  class='flex h-24 cursor-pointer items-center justify-center rounded-md bg-black/25 text-center backdrop-blur-md'
                  href={`${item.link}`}
                  target='_blank'
                >
                  <span class='text-xl'>{item.text}</span>
                </a>
              )
            })
          }
        </div>
      </main>

      <div class='hidden flex-1 transition-all duration-1000 md:block'>
        <div class='flex h-40 gap-6'>
          <div class='hidden flex-1 cursor-pointer rounded-md bg-black/25 p-4 px-3 backdrop-blur-md lg:block'>
            <span class='yy-content block pt-5 text-left'>加载中..</span>
            <!-- <span class='mt-3 block text-right'>——「网易云音乐」&emsp;</span> -->
          </div>

          <div
            class='flex flex-1 cursor-pointer flex-col justify-between rounded-md bg-black/25 p-4 px-3 text-center align-middle backdrop-blur-md transition-all duration-300'
          >
            <span class='current-date'>2000&nbsp;年&nbsp;1&nbsp;月&nbsp;11&nbsp;日&nbsp;</span>
            <span class='current-time text-5xl'>00:00:00</span>
            <div class='weather'>加载中..</div>
          </div>
        </div>

        <div class='mt-8 mb-4 text-xl'>网站列表</div>

        <div class='grid grid-cols-3 gap-4'>
          {
            siteList.map(item => {
              return (
                <a
                  class='flex h-24 cursor-pointer items-center justify-center rounded-md bg-black/25 text-center backdrop-blur-md'
                  href={`${item.link}`}
                  target='_blank'
                >
                  <span class='text-xl'>{item.text}</span>
                </a>
              )
            })
          }
        </div>
      </div>
    </section>
  </main>

  <footer class='bg-black/25 pb-6 text-center text-slate-600'>
    <p class='mb-1 text-xs'>© 2025 {siteTitle} 版权所有</p>
    <p class='text-xs'>
      <Link href={beianGN.href} target='_blank'>
        {beianGN.text}
      </Link>
      <Link
        class='sm:ml-2 sm:border-l sm:border-slate-700 sm:pl-2 dark:sm:border-slate-500'
        href='https://beian.miit.gov.cn'
        target='_blank'
      >
        {beianICP}
      </Link>
    </p>
  </footer>
</Base>

<script>
  function updateDateTime() {
    const currentDateElement = document.querySelector('.current-date')
    const currentTimeElement = document.querySelector('.current-time')

    const updateDate = () => {
      if (currentDateElement) {
        const now = new Date()
        const year = now.getFullYear()
        const month = now.getMonth() + 1
        const day = now.getDate()
        const weekday = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][now.getDay()]

        const formattedDate = `${year} 年 ${month} 月 ${day} 日&emsp;<span class='weekday'>${weekday}</span>`
        currentDateElement.innerHTML = formattedDate

        setTimeout(updateDate, 60000) // 每分钟更新日期
      }
    }

    const updateTime = () => {
      if (currentTimeElement) {
        const now = new Date()
        const hours = now.getHours().toString().padStart(2, '0')
        const minutes = now.getMinutes().toString().padStart(2, '0')
        const seconds = now.getSeconds().toString().padStart(2, '0')

        const formattedTime = `${hours}:${minutes}:${seconds}`
        currentTimeElement.textContent = formattedTime

        setTimeout(updateTime, 1000) // 每秒更新时间
      }
    }

    updateDate()
    updateTime()
  }

  document.addEventListener('DOMContentLoaded', updateDateTime)

  // 天气
  const fetchWeather = async () => {
    try {
      const response = await fetch('https://api.vvhan.com/api/weather')
      const weatherData = await response.json()

      const ele = document.querySelector('.weather')
      if (ele) {
        ele.innerHTML = `${weatherData?.city ?? ''}&emsp;${weatherData?.data?.type ?? ''}&emsp;${weatherData?.data?.low ?? ''} ${!!weatherData?.data?.low && !!weatherData?.data?.high ? '~' : ''} ${weatherData?.data?.high ?? ''}`
      }
    } catch {}
  }
  fetchWeather()

  // 一言
  const fetchYY = async () => {
    try {
      const response = await fetch('https://api.vvhan.com/api/dailyEnglish?type=json')
      const yyData = await response.json()

      const ele = document.querySelector('.yy-content')
      if (ele) {
        ele.innerHTML = `${yyData?.data?.en ?? ''}`
      }
    } catch {}
  }
  fetchYY()
</script>

<style>
  body::-webkit-scrollbar {
    display: none;
  }
  @font-face {
    font-family: 'Yunmobei-enlogo-Regular';
    src: url('https://static.lihaha.cn/font/Yunmobei-enlogo-Regular-2.ttf');
  }
</style>
